#include QMK_KEYBOARD_H
#ifdef PROTOCOL_LUFA
#    include "lufa.h"
#endif
#include "split_util.h"
#include "buz.h"

#include "version.h"

#ifdef RAW_ENABLE
#    include "raw_hid.h"
#endif

#if defined(MCU_RP)
#    undef RESET
#    define RESET QK_BOOT
#endif

// clang-format off
const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
  [_QWERTY] = LAYOUT_wrapper(
    _________________QWERTY_L1_________________, _________________QWERTY_R1_________________,
    _________________QWERTY_L2_________________, _________________QWERTY_R2_________________,
    _________________QWERTY_L3_________________, _________________QWERTY_R3_________________,
          LT(_NUM, KC_ESC), LT(_SYMBOL, KC_ENT), LT(_SYMBOL, KC_SPC), LT(_NUM, KC_BSPC)
  ),

  [_SYMBOL] = LAYOUT_wrapper(
    _________________SYMBOL_L1_________________, _________________SYMBOL_R1_________________,
    _________________SYMBOL_L2_________________, _________________SYMBOL_R2_________________,
    _________________SYMBOL_L3_________________, _________________SYMBOL_R3_________________,
                                _______, KC_TAB, _______, _______
  ),

  [_VIM] = LAYOUT_wrapper(
    __________________VIM_L1___________________, __________________VIM_R1___________________,
    __________________VIM_L2___________________, __________________VIM_R2___________________,
    __________________VIM_L3___________________, __________________VIM_R3___________________,
                             _______, CAPS_WORD, _______, REPEAT
  ),

  [_MOUSE] = LAYOUT_wrapper(
    _________________MOUSE_L1__________________, _________________MOUSE_R1__________________,
    _________________MOUSE_L2__________________, _________________MOUSE_R2__________________,
    _________________MOUSE_L3__________________, _________________MOUSE_R3__________________,
                               _______, KC_BTN3, KC_BTN1, KC_BTN2
  ),

  [_NUM] = LAYOUT_wrapper(
    _________________NUMPAD_L1_________________, _________________NUMPAD_R1_________________,
    _________________NUMPAD_L2_________________, _________________NUMPAD_R2_________________,
    _________________NUMPAD_L3_________________, _________________NUMPAD_R3_________________,
                               MO(_ADJUST), CAPS_WORD, KC_LEAD, KC_0
  ),

  [_MEDIA] = LAYOUT_wrapper(
    _________________MEDIA_L1__________________, _________________MEDIA_R1__________________,
    _________________MEDIA_L2__________________, _________________MEDIA_R2__________________,
    _________________MEDIA_L3__________________, _________________MEDIA_R3__________________,
                              _______, _______, _______, _______
  ),

  [_TMUX] = LAYOUT_wrapper(
    __________________TMUX_L1__________________, __________________TMUX_R1__________________,
    __________________TMUX_L2__________________, __________________TMUX_R2__________________,
    __________________TMUX_L3__________________, __________________TMUX_R3__________________,
                             CAPS_WORD, _______, _______, _______
  ),

  [_FUNC] = LAYOUT_wrapper(
    __________________FUNC_L1__________________, __________________FUNC_R1__________________,
    __________________FUNC_L2__________________, __________________FUNC_R2__________________,
    __________________FUNC_L3__________________, __________________FUNC_R3__________________,
                               _______, _______, _______,  _______
  ),

  [_ADJUST] = LAYOUT_wrapper(
    _________________ADJUST_L1_________________, _________________ADJUST_R1_________________,
    _________________ADJUST_L2_________________, _________________ADJUST_R2_________________,
    _________________ADJUST_L3_________________, _________________ADJUST_R3_________________,
                               _______, _______, _______, _______
  ),
};
// clang-format on

bool process_record_keymap(uint16_t keycode, keyrecord_t *record) {
    if (record->event.pressed) {
#ifndef SPLIT_KEYBOARD
        if ((keycode == RESET || keycode == MAKE) && !is_keyboard_master()) {
            return false;
        }
#endif
    }

    return true;
}
